export const __webpack_ids__=["8287"];export const __webpack_modules__={34394:function(e,t,i){i.d(t,{I:()=>a,k:()=>s});i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);const s=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function a(e){return s.has(e)?`var(--${e}-color)`:e}},6330:function(e,t,i){i(81738),i(94814),i(22960),i(6989);var s=i(73742),a=i(59048),o=i(7616),l=i(88245),r=i(28105),d=i(34394),c=i(39884),n=i(36221),h=i(27831),u=i(6291);const _=()=>Promise.all([i.e("7063"),i.e("5696"),i.e("4205")]).then(i.bind(i,44730)),b=(e,t)=>{(0,c.B)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:_,dialogParams:t})};i(67801),i(96005),i(33480),i(29981),i(72489),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var p=i(44272),m=i(56795),v=i(28905);i(81205),i(12692),i(81777),i(993);const y="___ADD_NEW___",g="___NO_LABELS___",f="___ADD_NEW_SUGGESTION___",C=e=>a.dy` <ha-combo-box-item type="button"> ${e.icon?a.dy`<ha-icon slot="start" .icon="${e.icon}"></ha-icon>`:a.Ld} ${e.name} </ha-combo-box-item> `;class x extends((0,u.f)(a.oi)){async open(){await this.updateComplete,await(this.comboBox?.open())}async focus(){await this.updateComplete,await(this.comboBox?.focus())}hassSubscribe(){return[(0,h.f4)(this.hass.connection,(e=>{this._labels=e}))]}updated(e){if(!this._init&&this.hass&&this._labels||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getLabels(this._labels,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels).map((e=>({...e,strings:[e.label_id,e.name]})));this.comboBox.items=e,this.comboBox.filteredItems=e}}render(){return a.dy` <ha-combo-box .hass="${this.hass}" .helper="${this.helper}" item-value-path="label_id" item-id-path="label_id" item-label-path="name" .value="${this._value}" .disabled="${this.disabled}" .required="${this.required}" .label="${void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.label"):this.label}" .placeholder="${this.placeholder?this._labels?.find((e=>e.label_id===this.placeholder))?.name:void 0}" .renderer="${C}" @filter-changed="${this._filterChanged}" @opened-changed="${this._openedChanged}" @value-changed="${this._labelChanged}"> </ha-combo-box> `}_filterChanged(e){const t=e.target,i=e.detail.value;if(!i)return void(this.comboBox.filteredItems=this.comboBox.items);const s=(0,m.q)(i,t.items?.filter((e=>![g,y].includes(e.label_id)))||[]);0===s.length?this.noAdd?this.comboBox.filteredItems=[{label_id:g,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null}]:(this._suggestion=i,this.comboBox.filteredItems=[{label_id:f,name:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus",color:null}]):this.comboBox.filteredItems=s}get _value(){return this.value||""}_openedChanged(e){this._opened=e.detail.value}_labelChanged(e){e.stopPropagation();let t=e.detail.value;if(t===g)return t="",void this.comboBox.setInputValue("");[f,y].includes(t)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),b(this,{entry:void 0,suggestedName:t===f?this._suggestion:"",createEntry:async e=>{const t=await(0,h.jo)(this.hass,e),i=[...this._labels,t];return this.comboBox.filteredItems=this._getLabels(i,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels),await this.updateComplete,await this.comboBox.updateComplete,this._setValue(t.label_id),t}}),this._suggestion=void 0,this.comboBox.setInputValue("")):t!==this._value&&this._setValue(t)}_setValue(e){this.value=e,setTimeout((()=>{(0,c.B)(this,"value-changed",{value:e}),(0,c.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._init=!1,this._getLabels=(0,r.Z)(((e,t,i,s,a,o,l,r,d,c,n)=>{let h,u,_={};(a||o||l||r||d)&&(_=(0,v.R6)(s),h=i,u=s.filter((e=>e.labels.length>0)),a&&(h=h.filter((e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some((e=>a.includes((0,p.M)(e.entity_id))))})),u=u.filter((e=>a.includes((0,p.M)(e.entity_id))))),o&&(h=h.filter((e=>{const t=_[e.id];return!t||!t.length||s.every((e=>!o.includes((0,p.M)(e.entity_id))))})),u=u.filter((e=>!o.includes((0,p.M)(e.entity_id))))),l&&(h=h.filter((e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&l.includes(t.attributes.device_class))}))})),u=u.filter((e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&l.includes(t.attributes.device_class)}))),r&&(h=h.filter((e=>r(e)))),d&&(h=h.filter((e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))})),u=u.filter((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))));let b=e;const m=new Set;let f;return h&&(f=h.filter((e=>e.area_id)).map((e=>e.area_id)),h.forEach((e=>{e.labels.forEach((e=>m.add(e)))}))),u&&(f=(f??[]).concat(u.filter((e=>e.area_id)).map((e=>e.area_id))),u.forEach((e=>{e.labels.forEach((e=>m.add(e)))}))),f&&f.forEach((e=>{t[e].labels.forEach((e=>m.add(e)))})),n&&(b=b.filter((e=>!n.includes(e.label_id)))),(h||u)&&(b=b.filter((e=>m.has(e.label_id)))),b.length||(b=[{label_id:g,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null,description:null,created_at:0,modified_at:0}]),c?b:[...b,{label_id:y,name:this.hass.localize("ui.components.label-picker.add_new"),icon:"mdi:plus",color:null,description:null,created_at:0,modified_at:0}]}))}}(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,s.__decorate)([(0,o.Cb)()],x.prototype,"label",void 0),(0,s.__decorate)([(0,o.Cb)()],x.prototype,"value",void 0),(0,s.__decorate)([(0,o.Cb)()],x.prototype,"helper",void 0),(0,s.__decorate)([(0,o.Cb)()],x.prototype,"placeholder",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-add"})],x.prototype,"noAdd",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"include-domains"})],x.prototype,"includeDomains",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-domains"})],x.prototype,"excludeDomains",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"include-device-classes"})],x.prototype,"includeDeviceClasses",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-label"})],x.prototype,"excludeLabels",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"deviceFilter",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"entityFilter",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean})],x.prototype,"disabled",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean})],x.prototype,"required",void 0),(0,s.__decorate)([(0,o.SB)()],x.prototype,"_opened",void 0),(0,s.__decorate)([(0,o.SB)()],x.prototype,"_labels",void 0),(0,s.__decorate)([(0,o.IO)("ha-combo-box",!0)],x.prototype,"comboBox",void 0),x=(0,s.__decorate)([(0,o.Mo)("ha-label-picker")],x);class $ extends((0,u.f)(a.oi)){async open(){await this.updateComplete,await(this.labelPicker?.open())}async focus(){await this.updateComplete,await(this.labelPicker?.focus())}hassSubscribe(){return[(0,h.f4)(this.hass.connection,(e=>{const t={};e.forEach((e=>{t[e.label_id]=e})),this._labels=t}))]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return a.dy` ${e?.length?a.dy`<ha-chip-set> ${(0,l.r)(e,(e=>e?.label_id),(e=>{const t=e?.color?(0,d.I)(e.color):void 0;return a.dy` <ha-input-chip .item="${e}" @remove="${this._removeItem}" @click="${this._openDetail}" .label="${e?.name}" selected="selected" style="${t?`--color: ${t}`:""}"> ${e?.icon?a.dy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:a.Ld} </ha-input-chip> `}))} </ha-chip-set>`:a.Ld} <ha-label-picker .hass="${this.hass}" .helper="${this.helper}" .disabled="${this.disabled}" .required="${this.required}" .label="${void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.add_label"):this.label}" .placeholder="${this.placeholder}" .excludeLabels="${this.value}" @value-changed="${this._labelChanged}"> </ha-label-picker> `}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter((e=>e!==t.label_id)))}_openDetail(e){const t=e.currentTarget.item;b(this,{entry:t,updateEntry:async e=>await(0,h.$0)(this.hass,t.label_id,e)})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout((()=>{(0,c.B)(this,"value-changed",{value:e}),(0,c.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.Z)(((e,t,i)=>e?.map((e=>t?.[e])).sort(((e,t)=>(0,n.$K)(e?.name||"",t?.name||"",i)))))}}$.styles=a.iv`ha-chip-set{margin-bottom:8px}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}`,(0,s.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"hass",void 0),(0,s.__decorate)([(0,o.Cb)()],$.prototype,"label",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"value",void 0),(0,s.__decorate)([(0,o.Cb)()],$.prototype,"helper",void 0),(0,s.__decorate)([(0,o.Cb)()],$.prototype,"placeholder",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-add"})],$.prototype,"noAdd",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"include-domains"})],$.prototype,"includeDomains",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-domains"})],$.prototype,"excludeDomains",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"include-device-classes"})],$.prototype,"includeDeviceClasses",void 0),(0,s.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-label"})],$.prototype,"excludeLabels",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"deviceFilter",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"entityFilter",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean})],$.prototype,"disabled",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean})],$.prototype,"required",void 0),(0,s.__decorate)([(0,o.SB)()],$.prototype,"_labels",void 0),(0,s.__decorate)([(0,o.IO)("ha-label-picker",!0)],$.prototype,"labelPicker",void 0),$=(0,s.__decorate)([(0,o.Mo)("ha-labels-picker")],$)},27831:function(e,t,i){i.d(t,{$0:()=>n,f4:()=>d,jo:()=>c});var s=i(88865),a=i(36221),o=i(87639);const l=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then((e=>e.sort(((e,t)=>(0,a.$K)(e.name,t.name))))),r=(e,t)=>e.subscribeEvents((0,o.D)((()=>l(e).then((e=>t.setState(e,!0)))),500,!0),"label_registry_updated"),d=(e,t)=>(0,s.B)("_labelRegistry",l,r,e,t),c=(e,t)=>e.callWS({type:"config/label_registry/create",...t}),n=(e,t,i)=>e.callWS({type:"config/label_registry/update",label_id:t,...i})},6291:function(e,t,i){i.d(t,{f:()=>o});i(81738),i(72489);var s=i(73742),a=i(7616);const o=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some((e=>void 0===this[e]))&&(this.__unsubs=this.hassSubscribe())}}return(0,s.__decorate)([(0,a.Cb)({attribute:!1})],t.prototype,"hass",void 0),t}}};
//# sourceMappingURL=8287.a43d554b0c698dac.js.map