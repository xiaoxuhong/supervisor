"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["7307"],{39257:function(e,t,s){s.a(e,(async function(e,i){try{s.r(t),s.d(t,{FlowPreviewGeneric:()=>b});s(26847),s(87799),s(1455),s(27530);var r=s(73742),o=s(59048),a=s(7616),_=s(15566),n=s(55925),d=s(87639),h=s(39884),p=(s(12942),e([n]));n=(p.then?(await p)():p)[0];let c,u,w=e=>e;class b extends o.oi{disconnectedCallback(){super.disconnectedCallback(),this._unsub&&(this._unsub.then((e=>e())),this._unsub=void 0)}willUpdate(e){e.has("stepData")&&this._debouncedSubscribePreview()}render(){return this._error?(0,o.dy)(c||(c=w`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):(0,o.dy)(u||(u=w`<entity-preview-row .hass="${0}" .stateObj="${0}"></entity-preview-row>`),this.hass,this._preview)}async _subscribePreview(){if(this._unsub&&((await this._unsub)(),this._unsub=void 0),"config_flow"===this.flowType||"options_flow"===this.flowType)try{this._unsub=(0,_.H)(this.hass,this.domain,this.flowId,this.flowType,this.stepData,this._setPreview),(0,h.B)(this,"set-flow-errors",{errors:{}})}catch(e){"string"==typeof e.message?this._error=e.message:(this._error=void 0,(0,h.B)(this,"set-flow-errors",e.message)),this._unsub=void 0,this._preview=void 0}}constructor(...e){super(...e),this._setPreview=e=>{const t=(new Date).toISOString();this._preview=Object.assign({entity_id:`${this.stepId}.___flow_preview___`,last_changed:t,last_updated:t,context:{id:"",parent_id:null,user_id:null}},e)},this._debouncedSubscribePreview=(0,d.D)((()=>{this._subscribePreview()}),250)}}(0,r.__decorate)([(0,a.Cb)({attribute:!1})],b.prototype,"hass",void 0),(0,r.__decorate)([(0,a.Cb)({attribute:!1})],b.prototype,"flowType",void 0),(0,r.__decorate)([(0,a.Cb)()],b.prototype,"domain",void 0),(0,r.__decorate)([(0,a.Cb)({attribute:!1})],b.prototype,"stepId",void 0),(0,r.__decorate)([(0,a.Cb)({attribute:!1})],b.prototype,"flowId",void 0),(0,r.__decorate)([(0,a.Cb)({attribute:!1})],b.prototype,"stepData",void 0),(0,r.__decorate)([(0,a.SB)()],b.prototype,"_preview",void 0),(0,r.__decorate)([(0,a.SB)()],b.prototype,"_error",void 0),b=(0,r.__decorate)([(0,a.Mo)("flow-preview-generic")],b),i()}catch(c){i(c)}}))}}]);
//# sourceMappingURL=7307.edacca45b82a2e4e.js.map