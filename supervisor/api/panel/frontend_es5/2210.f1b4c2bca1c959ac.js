"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["2210"],{31783:function(a,t,s){s.a(a,(async function(a,i){try{s.r(t);s(26847),s(1455),s(27530);var r=s(73742),o=(s(98334),s(59048)),e=s(7616),c=s(39884),n=s(78206),l=(s(12942),s(6514)),p=s(83378),h=s(31763),u=s(31021),d=s(72242),_=s(95814),g=s(74463),k=a([n,l,g]);[n,l,g]=k.then?(await k)():k;let m,v,b,y,w,B=a=>a;class P extends o.oi{showDialog(a){this._dialogParams=a,this._creatingBackup=!1}closeDialog(){this._dialogParams=void 0,this._creatingBackup=!1,this._error=void 0,(0,c.B)(this,"dialog-closed",{dialog:this.localName})}render(){return this._dialogParams?(0,o.dy)(m||(m=B` <ha-dialog open scrimClickAction @closed="${0}" .heading="${0}"> ${0} ${0} <mwc-button slot="secondaryAction" @click="${0}"> ${0} </mwc-button> <mwc-button .disabled="${0}" slot="primaryAction" @click="${0}"> ${0} </mwc-button> </ha-dialog> `),this.closeDialog,(0,p.i)(this.hass,this._dialogParams.supervisor.localize("backup.create_backup")),this._creatingBackup?(0,o.dy)(v||(v=B`<ha-spinner></ha-spinner>`)):(0,o.dy)(b||(b=B`<supervisor-backup-content .hass="${0}" .supervisor="${0}" dialogInitialFocus> </supervisor-backup-content>`),this.hass,this._dialogParams.supervisor),this._error?(0,o.dy)(y||(y=B`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):"",this.closeDialog,this._dialogParams.supervisor.localize("common.close"),this._creatingBackup,this._createBackup,this._dialogParams.supervisor.localize("backup.create")):o.Ld}async _createBackup(){if("running"!==this._dialogParams.supervisor.info.state)return void(0,d.Ys)(this,{title:this._dialogParams.supervisor.localize("backup.could_not_create"),text:this._dialogParams.supervisor.localize("backup.create_blocked_not_running",{state:this._dialogParams.supervisor.info.state})});const a=this._backupContent.backupDetails();if(this._creatingBackup=!0,this._error="",a.password&&!a.password.length)return this._error=this._dialogParams.supervisor.localize("backup.enter_password"),void(this._creatingBackup=!1);if(a.password&&a.password!==a.confirm_password)return this._error=this._dialogParams.supervisor.localize("backup.passwords_not_matching"),void(this._creatingBackup=!1);delete a.confirm_password;try{"full"===this._backupContent.backupType?await(0,h.vU)(this.hass,a):await(0,h.zU)(this.hass,a),this._dialogParams.onCreate(),this.closeDialog()}catch(t){this._error=(0,u.js)(t)}this._creatingBackup=!1}static get styles(){return[_.Qx,_.yu,(0,o.iv)(w||(w=B`:host{direction:var(--direction)}`))]}constructor(...a){super(...a),this._creatingBackup=!1}}(0,r.__decorate)([(0,e.Cb)({attribute:!1})],P.prototype,"hass",void 0),(0,r.__decorate)([(0,e.SB)()],P.prototype,"_dialogParams",void 0),(0,r.__decorate)([(0,e.SB)()],P.prototype,"_error",void 0),(0,r.__decorate)([(0,e.SB)()],P.prototype,"_creatingBackup",void 0),(0,r.__decorate)([(0,e.IO)("supervisor-backup-content")],P.prototype,"_backupContent",void 0),P=(0,r.__decorate)([(0,e.Mo)("dialog-hassio-create-backup")],P),i()}catch(m){i(m)}}))}}]);
//# sourceMappingURL=2210.f1b4c2bca1c959ac.js.map